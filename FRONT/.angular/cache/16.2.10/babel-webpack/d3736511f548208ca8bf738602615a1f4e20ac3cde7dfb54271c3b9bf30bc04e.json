{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction AlugarFilmeComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"CPF do Usu\\u00E1rio: \");\n    i0.ɵɵelementStart(5, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function AlugarFilmeComponent_div_2_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.cpf = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function AlugarFilmeComponent_div_2_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onClick());\n    });\n    i0.ɵɵtext(7, \"Alugar Filme\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Filme Selecionado: \", ctx_r0.filme.nome, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.cpf);\n  }\n}\nexport class AlugarFilmeComponent {\n  constructor(route, client) {\n    this.route = route;\n    this.client = client;\n    this.filmeId = 0;\n    this.cpf = 0;\n    this.filme = null;\n    this.usuario = null;\n    this.usuarios = [];\n    this.nome = \"\";\n  }\n  ngOnInit() {\n    // Recupera o ID do filme da rota\n    this.route.params.subscribe(params => {\n      this.filmeId = params['filmeID'];\n      this.carregarFilme();\n    });\n    this.client.get(\"https://localhost:7035/api/usuario/listar\").subscribe({\n      next: usuarios => {\n        this.usuarios = usuarios;\n      },\n      error: erro => {\n        console.log(erro);\n      }\n    });\n  }\n  carregarFilme() {\n    // Carrega informações do filme usando o ID\n    this.client.get(`https://localhost:7035/api/filme/buscar/${this.filmeId}`).subscribe({\n      next: filme => {\n        console.table(filme);\n        this.filme = filme;\n      },\n      error: erro => {\n        console.log(erro);\n      }\n    });\n  }\n  alugar() {\n    // Faz a chamada para o endpoint de aluguel\n    this.client.get(`https://localhost:7035/api/usuario/alugar/${this.filmeId}/${this.cpf}`).subscribe({\n      next: () => {\n        console.log(`Filme ${this.filme?.nome} alugado pelo usuário com CPF ${this.cpf}`);\n        // Redireciona para a página de filmes disponíveis após o aluguel\n        window.location.href = '/pages/filme/disponiveis';\n      },\n      error: erro => {\n        console.log(erro);\n      }\n    });\n  }\n  buscarUsuarioPorNome() {\n    if (!this.nome) {\n      // Se o nome estiver vazio, não fazer a busca\n      return;\n    }\n    // Realizar a busca na lista local\n    this.usuarios = this.usuarios.filter(usuario => usuario.nome.toLowerCase().includes(this.nome.toLowerCase()));\n  }\n  onClick() {\n    this.alugar();\n    this.buscarUsuarioPorNome();\n  }\n  static #_ = this.ɵfac = function AlugarFilmeComponent_Factory(t) {\n    return new (t || AlugarFilmeComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.HttpClient));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AlugarFilmeComponent,\n    selectors: [[\"app-alugar-filme\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [\"type\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"]],\n    template: function AlugarFilmeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \"Alugar Filme\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, AlugarFilmeComponent_div_2_Template, 8, 2, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.filme);\n      }\n    },\n    dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AlugarFilmeComponent_div_2_Template_input_ngModelChange_5_listener","$event","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","cpf","AlugarFilmeComponent_div_2_Template_button_click_6_listener","ctx_r3","onClick","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","filme","nome","ɵɵproperty","AlugarFilmeComponent","constructor","route","client","filmeId","usuario","usuarios","ngOnInit","params","subscribe","carregarFilme","get","next","error","erro","console","log","table","alugar","window","location","href","buscarUsuarioPorNome","filter","toLowerCase","includes","_","ɵɵdirectiveInject","i1","ActivatedRoute","i2","HttpClient","_2","selectors","decls","vars","consts","template","AlugarFilmeComponent_Template","rf","ctx","ɵɵtemplate","AlugarFilmeComponent_div_2_Template"],"sources":["C:\\Users\\mathe\\Documents\\Locadora_de_Filmes\\FRONT\\src\\app\\pages\\filme\\alugar-filme\\alugar-filme.component.ts","C:\\Users\\mathe\\Documents\\Locadora_de_Filmes\\FRONT\\src\\app\\pages\\filme\\alugar-filme\\alugar-filme.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Filme } from 'src/app/models/filme.model';\nimport { Usuario } from 'src/app/models/usuario.model';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-alugar-filme',\n  templateUrl: './alugar-filme.component.html',\n  styleUrls: ['./alugar-filme.component.css']\n})\nexport class AlugarFilmeComponent {\n  filmeId: number = 0;\n  cpf: number = 0;\n  filme: Filme | null = null;\n  usuario: Usuario | null = null;\n  usuarios: Usuario[] = [];\n  nome: string = \"\";\n\n  constructor(private route: ActivatedRoute, private client: HttpClient) {}\n\n  ngOnInit(): void {\n    // Recupera o ID do filme da rota\n    this.route.params.subscribe(params => {\n      this.filmeId = params['filmeID'];\n      this.carregarFilme();\n    });\n\n    this.client.get<Usuario[]>\n      (\"https://localhost:7035/api/usuario/listar\")\n      .subscribe({\n        next: (usuarios) =>{\n          this.usuarios = usuarios\n        },\n        error: (erro) =>{\n          console.log(erro)\n        }\n      });\n  }\n\n  carregarFilme(): void {\n    // Carrega informações do filme usando o ID\n    this.client.get<Filme>(`https://localhost:7035/api/filme/buscar/${this.filmeId}`).subscribe({\n      next: (filme) => {\n        console.table(filme)\n        this.filme = filme;\n      },\n      error: (erro) => {\n        console.log(erro);\n      }\n    });\n  }\n\n  alugar(): void {\n    // Faz a chamada para o endpoint de aluguel\n    this.client.get(`https://localhost:7035/api/usuario/alugar/${this.filmeId}/${this.cpf}`).subscribe({\n      next: () => {\n        console.log(`Filme ${this.filme?.nome} alugado pelo usuário com CPF ${this.cpf}`);\n        // Redireciona para a página de filmes disponíveis após o aluguel\n        window.location.href = '/pages/filme/disponiveis';\n      },\n      error: (erro) => {\n        console.log(erro);\n      }\n    });\n  }\n\n  buscarUsuarioPorNome(): void {\n    if (!this.nome) {\n      // Se o nome estiver vazio, não fazer a busca\n      return;\n    }\n\n    // Realizar a busca na lista local\n    this.usuarios = this.usuarios.filter(usuario =>\n      usuario.nome.toLowerCase().includes(this.nome.toLowerCase())\n    );\n  }\n\n  onClick(): void{\n    this.alugar();\n    this.buscarUsuarioPorNome();\n  }\n\n}","<h1>Alugar Filme</h1>\n\n<div *ngIf=\"filme\">\n  <p>Filme Selecionado: {{ filme.nome }}</p>\n  <p>CPF do Usuário: <input type=\"number\" [(ngModel)]=\"cpf\" /></p>\n  <button (click)=\"onClick()\">Alugar Filme</button>\n</div>"],"mappings":";;;;;;;;ICEAA,EAAA,CAAAC,cAAA,UAAmB;IACdD,EAAA,CAAAE,MAAA,GAAmC;IAAAF,EAAA,CAAAG,YAAA,EAAI;IAC1CH,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAE,MAAA,4BAAgB;IAAAF,EAAA,CAAAC,cAAA,eAAyC;IAApBD,EAAA,CAAAI,UAAA,2BAAAC,mEAAAC,MAAA;MAAAN,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAT,EAAA,CAAAU,aAAA;MAAA,OAAAV,EAAA,CAAAW,WAAA,CAAAF,MAAA,CAAAG,GAAA,GAAAN,MAAA;IAAA,EAAiB;IAAtCN,EAAA,CAAAG,YAAA,EAAyC;IAC5DH,EAAA,CAAAC,cAAA,gBAA4B;IAApBD,EAAA,CAAAI,UAAA,mBAAAS,4DAAA;MAAAb,EAAA,CAAAO,aAAA,CAAAC,GAAA;MAAA,MAAAM,MAAA,GAAAd,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAW,WAAA,CAAAG,MAAA,CAAAC,OAAA,EAAS;IAAA,EAAC;IAACf,EAAA,CAAAE,MAAA,mBAAY;IAAAF,EAAA,CAAAG,YAAA,EAAS;;;;IAF9CH,EAAA,CAAAgB,SAAA,GAAmC;IAAnChB,EAAA,CAAAiB,kBAAA,wBAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA,KAAmC;IACEpB,EAAA,CAAAgB,SAAA,GAAiB;IAAjBhB,EAAA,CAAAqB,UAAA,YAAAH,MAAA,CAAAN,GAAA,CAAiB;;;ADO3D,OAAM,MAAOU,oBAAoB;EAQ/BC,YAAoBC,KAAqB,EAAUC,MAAkB;IAAjD,KAAAD,KAAK,GAALA,KAAK;IAA0B,KAAAC,MAAM,GAANA,MAAM;IAPzD,KAAAC,OAAO,GAAW,CAAC;IACnB,KAAAd,GAAG,GAAW,CAAC;IACf,KAAAO,KAAK,GAAiB,IAAI;IAC1B,KAAAQ,OAAO,GAAmB,IAAI;IAC9B,KAAAC,QAAQ,GAAc,EAAE;IACxB,KAAAR,IAAI,GAAW,EAAE;EAEuD;EAExES,QAAQA,CAAA;IACN;IACA,IAAI,CAACL,KAAK,CAACM,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACnC,IAAI,CAACJ,OAAO,GAAGI,MAAM,CAAC,SAAS,CAAC;MAChC,IAAI,CAACE,aAAa,EAAE;IACtB,CAAC,CAAC;IAEF,IAAI,CAACP,MAAM,CAACQ,GAAG,CACZ,2CAA2C,CAAC,CAC5CF,SAAS,CAAC;MACTG,IAAI,EAAGN,QAAQ,IAAI;QACjB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;MAC1B,CAAC;MACDO,KAAK,EAAGC,IAAI,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACnB;KACD,CAAC;EACN;EAEAJ,aAAaA,CAAA;IACX;IACA,IAAI,CAACP,MAAM,CAACQ,GAAG,CAAQ,2CAA2C,IAAI,CAACP,OAAO,EAAE,CAAC,CAACK,SAAS,CAAC;MAC1FG,IAAI,EAAGf,KAAK,IAAI;QACdkB,OAAO,CAACE,KAAK,CAACpB,KAAK,CAAC;QACpB,IAAI,CAACA,KAAK,GAAGA,KAAK;MACpB,CAAC;MACDgB,KAAK,EAAGC,IAAI,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACnB;KACD,CAAC;EACJ;EAEAI,MAAMA,CAAA;IACJ;IACA,IAAI,CAACf,MAAM,CAACQ,GAAG,CAAC,6CAA6C,IAAI,CAACP,OAAO,IAAI,IAAI,CAACd,GAAG,EAAE,CAAC,CAACmB,SAAS,CAAC;MACjGG,IAAI,EAAEA,CAAA,KAAK;QACTG,OAAO,CAACC,GAAG,CAAC,SAAS,IAAI,CAACnB,KAAK,EAAEC,IAAI,iCAAiC,IAAI,CAACR,GAAG,EAAE,CAAC;QACjF;QACA6B,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,0BAA0B;MACnD,CAAC;MACDR,KAAK,EAAGC,IAAI,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;MACnB;KACD,CAAC;EACJ;EAEAQ,oBAAoBA,CAAA;IAClB,IAAI,CAAC,IAAI,CAACxB,IAAI,EAAE;MACd;MACA;;IAGF;IACA,IAAI,CAACQ,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACiB,MAAM,CAAClB,OAAO,IAC1CA,OAAO,CAACP,IAAI,CAAC0B,WAAW,EAAE,CAACC,QAAQ,CAAC,IAAI,CAAC3B,IAAI,CAAC0B,WAAW,EAAE,CAAC,CAC7D;EACH;EAEA/B,OAAOA,CAAA;IACL,IAAI,CAACyB,MAAM,EAAE;IACb,IAAI,CAACI,oBAAoB,EAAE;EAC7B;EAAC,QAAAI,CAAA,G;qBAvEU1B,oBAAoB,EAAAtB,EAAA,CAAAiD,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAnD,EAAA,CAAAiD,iBAAA,CAAAG,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;UAApBhC,oBAAoB;IAAAiC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,8BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCXjC7D,EAAA,CAAAC,cAAA,SAAI;QAAAD,EAAA,CAAAE,MAAA,mBAAY;QAAAF,EAAA,CAAAG,YAAA,EAAK;QAErBH,EAAA,CAAA+D,UAAA,IAAAC,mCAAA,iBAIM;;;QAJAhE,EAAA,CAAAgB,SAAA,GAAW;QAAXhB,EAAA,CAAAqB,UAAA,SAAAyC,GAAA,CAAA3C,KAAA,CAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}